---
path: ""
date: "2020-04-04"
title: "serveless初实践"
tags: ["serverless", "oss", "图片处理"]
weather: ⛅
---


一转眼，距离上次写文章已经7个月了，这让我不禁反思这7个月是否有影响到自己的知识拓展。思来想去，其实在公司也了解到很多新的东西，比如grafana,函数计算，oss，只不过一直没有去尝试实践，正好最近看到淘宝前端内部serverless全栈的实践，感觉自己是时候试一试了。

## 用serverless实践什么

### 目前需要
关于实践的对象,最先考虑到的就是自己的音乐播放器项目,播放器的背景图片由于一直用的高清图像，所以每次加载的时候很慢，造成很不好的用户体验。对于图片的问题的优化，目前最常见的两种解决方案就是预加载和利用*placeholder(使用占位图片)*,关于预加载，就是提前下载用户还未使用的图片，这对于都是高清图片来说会造成用户的流量损失，因此placeholder是最好的选择。 

使用placeholder就需要确定用什么图片占位，在一些大型门户网站占位图片都是相同的特制图片，还有一些就是原图片的压缩图。在这里，针对我这个非常大的背景图，肯定不能使用相同的那种特制的placeholder，所以最终决定使用原图片的压缩版本作为占位图片。  

图片的压缩有很多种类型，有简单的直接压缩大小，也有生成模糊图像和轨迹图像的，经过长时间的收集比较，发现了一种很酷并且压缩极大的占位图，唯一的缺点就是需要比较长的图片处理时间。那么这里我们就可以回到文章的主题serverless，利用阿里云的云函数计算，让它来帮我们处理图片，避免了web程序后端大量处理图片对于客户端请求/发送带来的压力。


## 实现方案


